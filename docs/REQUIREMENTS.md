# 要件定義書 (REQUIREMENTS.md)

## 1. プロジェクト概要

### 1.1 プロジェクト名
Element Inspector Lite

### 1.2 バージョン
v1.0.0

### 1.3 目的
Chrome拡張機能開発の基礎を学びながら、Webページの要素情報を取得・表示する機能を実装する。

### 1.4 背景
最終的に「SASS形式でネストされたCSS情報を抽出する拡張機能」を開発するための学習ステップとして、まずはシンプルな要素情報の取得機能を実装する。

---

## 2. 機能要件

### 2.1 必須機能（Must Have）

#### FR-001: Inspectモード切り替え
- **説明**: ポップアップからInspectモードのON/OFFを切り替えられる
- **入力**: ボタンクリック
- **出力**: モード状態の変更、ボタンテキストの更新
- **受け入れ基準**:
  - [ ] ボタンクリックでモードが切り替わる
  - [ ] 現在のモード状態がボタンテキストに反映される
  - [ ] モード状態がタブ間で保持される

#### FR-002: 要素選択
- **説明**: Inspectモード中、ページ上の要素をクリックで選択できる
- **入力**: 要素のクリック
- **出力**: 選択された要素の参照
- **受け入れ基準**:
  - [ ] クリックした要素が選択される
  - [ ] クリックイベントの伝播が停止される（リンク遷移等の防止）
  - [ ] 選択時にデフォルトの動作が発生しない

#### FR-003: ホバーハイライト
- **説明**: Inspectモード中、マウスホバーで要素をハイライト表示する
- **入力**: マウスホバー
- **出力**: 要素の視覚的なハイライト
- **受け入れ基準**:
  - [ ] ホバー中の要素にアウトライン表示
  - [ ] ホバーを外すとアウトラインが消える
  - [ ] 元のページのスタイルに影響を与えない

#### FR-004: 要素情報の取得
- **説明**: 選択された要素から以下の情報を取得する
- **取得項目**:
  - タグ名（小文字）
  - ID属性（存在する場合）
  - クラス名リスト（複数可）
  - 直接の子要素の数
- **受け入れ基準**:
  - [ ] タグ名が正しく取得される
  - [ ] IDが存在する場合のみ表示される
  - [ ] 複数のクラスが配列として取得される
  - [ ] 子要素数が正しくカウントされる

#### FR-005: 情報表示
- **説明**: 取得した要素情報をポップアップに表示する
- **入力**: 要素情報オブジェクト
- **出力**: 整形されたHTML表示
- **受け入れ基準**:
  - [ ] 各項目がラベル付きで表示される
  - [ ] 未選択時は「要素を選択してください」と表示
  - [ ] クラスが複数ある場合はカンマ区切りで表示

### 2.2 任意機能（Nice to Have）

#### FR-006: セレクタ生成
- **説明**: 選択した要素のCSSセレクタを自動生成する
- **出力例**: `div#main > ul.nav-list`

#### FR-007: コピー機能
- **説明**: 表示された情報をクリップボードにコピーできる

---

## 3. 非機能要件

### 3.1 パフォーマンス
- **NFR-001**: ホバーハイライトの遅延は50ms以下
- **NFR-002**: 要素情報の取得は100ms以下で完了

### 3.2 互換性
- **NFR-003**: Chrome バージョン 88 以上で動作
- **NFR-004**: Manifest V3 形式を使用

### 3.3 セキュリティ
- **NFR-005**: Content Security Policy を遵守
- **NFR-006**: 最小限の権限のみ要求（activeTab）

### 3.4 ユーザビリティ
- **NFR-007**: 直感的なUI（ボタン1つで操作開始）
- **NFR-008**: 日本語UIに対応

---

## 4. 制約条件

### 4.1 技術的制約
- Chrome Extensions Manifest V3 を使用すること
- 外部ライブラリは使用しない（Vanilla JSのみ）
- ES6+ の構文を使用可

### 4.2 対象外（スコープ外）
- Firefox/Safari など他ブラウザ対応
- CSS情報の取得（Step 2以降で実装）
- ネスト構造の解析（Step 3以降で実装）
- SASS形式出力（Step 4で実装）

---

## 5. 用語定義

| 用語 | 説明 |
|------|------|
| Inspectモード | 要素選択が有効な状態 |
| Content Script | Webページに注入されるスクリプト |
| Popup | 拡張機能アイコンクリック時に表示されるUI |
| Manifest | 拡張機能の設定ファイル（JSON） |

---

## 6. 成功指標

1. 拡張機能がChromeに正常にインストールできる
2. 任意のWebサイトで要素選択が動作する
3. 選択した要素の情報が正しく表示される
4. モードのON/OFFが正常に切り替わる
